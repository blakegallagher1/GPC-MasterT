{
  "version": "1",
  "riskTierRules": {
    "high": [
      "app/api/legal-chat/**",
      "lib/tools/**",
      "db/schema.ts",
      "packages/config/src/contract.ts",
      ".github/workflows/**"
    ],
    "low": [
      "**"
    ]
  },
  "mergePolicy": {
    "high": {
      "requiredChecks": [
        "risk-policy-gate",
        "harness-smoke",
        "Browser Evidence",
        "CI Pipeline"
      ],
      "requireCodeReviewAgent": true,
      "requireBrowserEvidence": true
    },
    "low": {
      "requiredChecks": [
        "risk-policy-gate",
        "CI Pipeline"
      ],
      "requireCodeReviewAgent": false,
      "requireBrowserEvidence": false
    }
  },
  "docsDriftRules": {
    "controlPlanePaths": [
      "risk-policy.contract.json",
      ".github/workflows/**",
      "AGENTS.md"
    ],
    "requiredDocPaths": [
      "docs/playbooks/**",
      "docs/operating-model/**",
      "docs/architecture/**",
      "observability/runbooks/**"
    ],
    "coverageByPathClass": [
      {
        "id": "workflow-or-policy-updates",
        "triggerPaths": [
          ".github/workflows/**",
          "risk-policy.contract.json"
        ],
        "requiredDocPaths": [
          "docs/playbooks/**",
          "docs/operating-model/**"
        ],
        "reason": "Workflow and policy changes must keep operator process docs aligned."
      },
      {
        "id": "agent-governance-updates",
        "triggerPaths": [
          "AGENTS.md",
          "tools/review-loop/**",
          "packages/config/src/**"
        ],
        "requiredDocPaths": [
          "docs/operating-model/**",
          "docs/architecture/**"
        ],
        "reason": "Control-plane governance changes require architecture and operating-model updates."
      },
      {
        "id": "service-runtime-updates",
        "triggerPaths": [
          "apps/api/**",
          "infra/**"
        ],
        "requiredDocPaths": [
          "docs/architecture/**",
          "observability/runbooks/**"
        ],
        "reason": "Runtime changes require architecture detail and corresponding runbook updates."
      }
    ]
  },
  "browserEvidence": {
    "requiredFlows": [
      "legal-chat-login",
      "legal-chat-query"
    ],
    "requiredFields": [
      "entrypoint",
      "accountIdentity",
      "timestamp",
      "flowName"
    ],
    "maxAgeDays": 7
  },
  "reviewAgent": {
    "name": "Reviewer Mesh",
    "timeoutMinutes": 20,
    "providers": [
      {
        "id": "style",
        "name": "Style Reviewer",
        "rerunWorkflow": "style-reviewer-rerun.yml",
        "autoResolveWorkflow": "style-reviewer-auto-resolve-threads.yml"
      },
      {
        "id": "security",
        "name": "Security Reviewer",
        "rerunWorkflow": "security-reviewer-rerun.yml",
        "autoResolveWorkflow": "security-reviewer-auto-resolve-threads.yml"
      },
      {
        "id": "architecture",
        "name": "Architecture Reviewer",
        "rerunWorkflow": "architecture-reviewer-rerun.yml",
        "autoResolveWorkflow": "architecture-reviewer-auto-resolve-threads.yml"
      }
    ]
  },
  "remediationAgent": {
    "name": "Codex Action",
    "enabled": true,
    "pinModel": true,
    "skipStaleComments": true
  },
  "harnessGapLoop": {
    "enabled": true,
    "issueLabel": "harness-gap",
    "slaTracking": true
  }
}
